import{r as v,i as V,u as B,j as E,c,a as t,k as i,q as p,F as j,l as I,s as h,t as f,x as w,y,z as k,o as r,v as M,d as z}from"./entry.795c6a15.js";const F={class:"main _add"},J=t("h2",null," 新しい練習を作ろう！ ",-1),O=t("hr",null,null,-1),R={class:"grid"},U={class:"list"},A=t("h3",null," 保存したテーマ ",-1),H={key:0,class:"alert"},L=["onClick"],Q=["onClick"],Y=t("hr",null,null,-1),G={key:0},K={key:1},P={class:"item"},W=t("label",null,"テーマ",-1),X={class:"item"},Z=t("label",null,"単語（改行で単語を区切ってください）",-1),ee={class:"actions"},te=t("button",null," 保存 ",-1),b="saved_tests",ne="編集 - 聞き取りゲーム",_="自分のテーマを編集",se="https://kikitori.boggy.tw",S="https://kikitori.boggy.tw/images/share.jpg",ae={__name:"add",setup(le){const l=v([]),o=v(null),a=v(null),d=v(null),m=v(null);function N(){const n=localStorage.getItem(b);l.value=n?JSON.parse(n):[]}function g(){localStorage.setItem(b,JSON.stringify(l.value)),window.dispatchEvent(new Event("saved_test_updated"))}function C(n){o.value=n,a.value=l.value[n].title,d.value=l.value[n].questions.join("\r");const e=window.scrollY+m.value.getBoundingClientRect().y-100;window.scrollTo(0,e)}function q(){o.value=null,a.value=null,d.value=null}function T(){const n=a.value.replace(/^\s+|\s+$/g,"");if(console.log(o.value),o.value===null&&l.value.find(s=>s.title===n)){alert("保存に失敗しました。すでに同じテーマがあります。");return}const e=[...new Set(d.value.split(/\r|\n/g).filter(s=>!!s))];if(e.length<4){alert("保存に失敗しました。少なくとも4つ異なる単語が必要です。");return}e.forEach((s,u)=>{e[u]=e[u].replace(/^\s+|\s+$/g,"")}),!isNaN(o.value)&&o.value!==null?l.value[o.value]={title:n,questions:e}:(l.value.push({title:n,questions:e}),o.value=l.value.length-1),g(),alert("保存しました")}function $(n){confirm("Are you sure")&&(l.value.splice(n,1),g())}const x=V("pTitle");return x.value="新しい練習を作ろう！",B({title:ne,meta:[{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"},{name:"description",content:_},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:a},{name:"twitter:description",desc:_},{name:"twitter:image",content:S},{name:"og:type",content:"website"},{name:"og:title",content:a},{name:"og:description",content:_},{name:"og:image",content:S},{name:"og:url",content:se},{name:"og:site_name",content:"iDrip"}]}),E(()=>{N()}),(n,e)=>(r(),c("div",F,[J,O,t("div",R,[t("div",U,[A,i(l).length?p("",!0):(r(),c("div",H," データがありません ")),(r(!0),c(j,null,I(i(l),(s,u)=>(r(),c("div",{key:`test_${u}`,class:M(["item",{active:u===i(o)}]),onClick:D=>C(u)},[z(f(s.title)+" ",1),t("button",{type:"button",class:"small outline secondary",onClick:h(D=>$(u),["stop"])}," 削除 ",8,Q)],10,L))),128)),Y]),t("div",{ref_key:"content",ref:m,class:"content"},[t("form",{onSubmit:e[3]||(e[3]=h(s=>T(),["prevent"]))},[i(o)!==null?(r(),c("h3",G," テーマ「"+f(i(a))+"」を編集 ",1)):(r(),c("h3",K," 新しいテーマを編集 ")),t("div",P,[W,w(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>k(a)?a.value=s:null),required:""},null,512),[[y,i(a)]])]),t("div",X,[Z,w(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=s=>k(d)?d.value=s:null),required:""},null,512),[[y,i(d)]])]),t("div",ee,[i(o)!==null?(r(),c("button",{key:0,type:"button",class:"outline secondary",onClick:e[2]||(e[2]=s=>q())}," 新しいのを作る ")):p("",!0),te])],32)],512)])]))}};export{ae as default};
