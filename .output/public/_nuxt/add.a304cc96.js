import{r as v,u as V,i as x,c,a as t,j as i,l as p,F as B,k as E,m as h,t as f,q as w,v as y,s as k,o as r,n as j,d as I}from"./entry.4e15955c.js";const M={class:"_add"},F=t("h2",null," 新しい練習を作ろう！ ",-1),J=t("hr",null,null,-1),O={class:"grid"},R={class:"list"},U=t("h3",null," 保存したテーマ ",-1),z={key:0,class:"alert"},A=["onClick"],H=["onClick"],L=t("hr",null,null,-1),Q={key:0},Y={key:1},G={class:"item"},K=t("label",null,"テーマ",-1),P={class:"item"},W=t("label",null,"単語（改行で単語を区切ってください）",-1),X={class:"actions"},Z=t("button",null," 保存 ",-1),b="saved_tests",ee="編集 - 聞き取りゲーム",_="自分のテーマを編集",te="https://kikitori.boggy.tw",S="https://kikitori.boggy.tw/images/share.jpg",le={__name:"add",setup(ne){const l=v([]),o=v(null),a=v(null),d=v(null),m=v(null);function N(){const n=localStorage.getItem(b);l.value=n?JSON.parse(n):[]}function g(){localStorage.setItem(b,JSON.stringify(l.value)),window.dispatchEvent(new Event("saved_test_updated"))}function C(n){o.value=n,a.value=l.value[n].title,d.value=l.value[n].questions.join("\r");const e=window.scrollY+m.value.getBoundingClientRect().y-100;window.scrollTo(0,e)}function q(){o.value=null,a.value=null,d.value=null}function $(){const n=a.value.replace(/^\s+|\s+$/g,"");if(console.log(o.value),o.value===null&&l.value.find(s=>s.title===n)){alert("保存に失敗しました。すでに同じテーマがあります。");return}const e=[...new Set(d.value.split(/\r|\n/g).filter(s=>!!s))];if(e.length<4){alert("保存に失敗しました。少なくとも4つ異なる単語が必要です。");return}e.forEach((s,u)=>{e[u]=e[u].replace(/^\s+|\s+$/g,"")}),!isNaN(o.value)&&o.value!==null?l.value[o.value]={title:n,questions:e}:(l.value.push({title:n,questions:e}),o.value=l.value.length-1),g(),alert("保存しました")}function D(n){confirm("Are you sure")&&(l.value.splice(n,1),g())}return V({title:ee,meta:[{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"},{name:"description",content:_},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:a},{name:"twitter:description",desc:_},{name:"twitter:image",content:S},{name:"og:type",content:"website"},{name:"og:title",content:a},{name:"og:description",content:_},{name:"og:image",content:S},{name:"og:url",content:te},{name:"og:site_name",content:"iDrip"}]}),x(()=>{N()}),(n,e)=>(r(),c("div",M,[F,J,t("div",O,[t("div",R,[U,i(l).length?p("",!0):(r(),c("div",z," データがありません ")),(r(!0),c(B,null,E(i(l),(s,u)=>(r(),c("div",{key:`test_${u}`,class:j(["item",{active:u===i(o)}]),onClick:T=>C(u)},[I(f(s.title)+" ",1),t("button",{type:"button",class:"small outline secondary",onClick:h(T=>D(u),["stop"])}," 削除 ",8,H)],10,A))),128)),L]),t("div",{ref_key:"content",ref:m,class:"content"},[t("form",{onSubmit:e[3]||(e[3]=h(s=>$(),["prevent"]))},[i(o)!==null?(r(),c("h3",Q," テーマ「"+f(i(a))+"」を編集 ",1)):(r(),c("h3",Y," 新しいテーマを編集 ")),t("div",G,[K,w(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>k(a)?a.value=s:null),required:""},null,512),[[y,i(a)]])]),t("div",P,[W,w(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=s=>k(d)?d.value=s:null),required:""},null,512),[[y,i(d)]])]),t("div",X,[i(o)!==null?(r(),c("button",{key:0,type:"button",class:"outline",onClick:e[2]||(e[2]=s=>q())}," 新しいのを作る ")):p("",!0),Z])],32)],512)])]))}};export{le as default};
