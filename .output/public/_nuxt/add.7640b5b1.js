import{r as v,h as V,c,a as e,j as a,l as m,F as B,k as D,m as p,t as f,q as g,v as y,s as k,o as d,n as E,d as T}from"./entry.282628cf.js";const x={class:"_add"},I=e("h2",null," 新しい練習を作ろう！ ",-1),M=e("hr",null,null,-1),j={class:"grid"},F={class:"list"},J=e("h3",null," 保存したテーマ ",-1),O={key:0,class:"alert"},R=["onClick"],U=["onClick"],z=e("hr",null,null,-1),A={key:0},L={key:1},Q={class:"item"},Y=e("label",null,"テーマ",-1),G={class:"item"},H=e("label",null,"単語（改行で単語を区切ってください）",-1),K={class:"actions"},P=e("button",null," 保存 ",-1),w="saved_tests",Z={__name:"add",setup(W){const n=v([]),o=v(null),i=v(null),r=v(null),_=v(null);function N(){const s=localStorage.getItem(w);n.value=s?JSON.parse(s):[]}function h(){localStorage.setItem(w,JSON.stringify(n.value)),window.dispatchEvent(new Event("saved_test_updated"))}function S(s){o.value=s,i.value=n.value[s].title,r.value=n.value[s].questions.join("\r");const t=window.scrollY+_.value.getBoundingClientRect().y-100;window.scrollTo(0,t)}function b(){o.value=null,i.value=null,r.value=null}function C(){const s=i.value.replace(/^\s+|\s+$/g,""),t=r.value.split(/\r|\n/g).filter(l=>!!l);t.forEach((l,u)=>{t[u]=t[u].replace(/^\s+|\s+$/g,"")}),!isNaN(o.value)&&o.value!==null?n.value[o.value]={title:s,questions:t}:n.value.push({title:s,questions:t}),h()}function q(s){confirm("Are you sure")&&(n.value.splice(s,1),h())}return V(()=>{N()}),(s,t)=>(d(),c("div",x,[I,M,e("div",j,[e("div",F,[J,a(n).length?m("",!0):(d(),c("div",O," データがありません ")),(d(!0),c(B,null,D(a(n),(l,u)=>(d(),c("div",{key:`test_${u}`,class:E(["item",{active:u===a(o)}]),onClick:$=>S(u)},[T(f(l.title)+" ",1),e("button",{type:"button",class:"small outline secondary",onClick:p($=>q(u),["stop"])}," 削除 ",8,U)],10,R))),128)),z]),e("div",{ref_key:"content",ref:_,class:"content"},[e("form",{onSubmit:t[3]||(t[3]=p(l=>C(),["prevent"]))},[a(o)!==null?(d(),c("h3",A," テーマ「"+f(a(i))+"」を編集 ",1)):(d(),c("h3",L," 新しいテーマを編集 ")),e("div",Q,[Y,g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>k(i)?i.value=l:null),required:""},null,512),[[y,a(i)]])]),e("div",G,[H,g(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=l=>k(r)?r.value=l:null),required:""},null,512),[[y,a(r)]])]),e("div",K,[a(o)!==null?(d(),c("button",{key:0,type:"button",onClick:t[2]||(t[2]=l=>b())}," キャンセル ")):m("",!0),P])],32)],512)])]))}};export{Z as default};
