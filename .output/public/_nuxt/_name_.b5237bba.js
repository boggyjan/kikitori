import{_ as I,a as Q}from"./NoJpVoiceFound.35dcbf5e.js";import{f as U,g as B,h as G,r,i as K,j as W,k as V,w as P,l as X,o as n,a as t,b as A,m as o,c as a,F as u,t as d,n as j,q as F,d as p,s as Y,v as O,x as Z}from"./entry.11ebbf07.js";import{u as tt}from"./index.66c1c13c.js";const et={class:"main _test _custom"},nt={key:0},st=t("thead",null,[t("tr",null,[t("th",null,"問題"),t("th",null,"答え"),t("th",null,"結果")])],-1),ot=["onClick"],at=["onClick"],lt={class:"result"},ut={class:"voc-list"},it=["onClick"],ct=t("hr",null,null,-1),rt={class:"actions"},dt={key:1},pt={class:"answers"},_t=t("h3",{class:"answer-head"}," 正しい答えを選んでください ",-1),ht=["onClick"],vt=t("hr",null,null,-1),mt={class:"actions"},yt=["disabled"],ft={class:"google-ad"},gt=t("ins",{class:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-8209950884395919","data-ad-slot":"8597565030","data-ad-format":"auto","data-full-width-responsive":"true"},null,-1),kt=6,$t={__name:"[name]",setup(bt){const m=U(),H=B("pTitle");H.value=m.params.name;const $=m.params.name+" - 聞き取りゲーム",x=m.params.name+"に関する聞き取りゲームをやりましょう";tt({title:$,description:x,ogTitle:$,ogDescription:x,twitterTitle:$,twitterDescription:x});const L=G(),h=r(null),y=r(1),M=r(1),N=r(null),w=r([]),C=r(null),q=r([]),_=r(null),f=r([]),g=K(()=>Math.floor(f.value.filter(l=>l.question===l.answer).length/f.value.length*100));function S(l=!0){l&&alert("Not Found"),L.push("/")}function R(){if(m.params.name){const l="saved_tests",s=localStorage.getItem(l);if(!s){S();return}const i=(s?JSON.parse(s):[]).find(b=>b.title===m.params.name);if(!i){S();return}N.value=i.title,w.value=i.questions,w.value.length<4&&(alert("少なくとも4つ異なる単語が必要です。"),S(!1))}else S()}function J(l){M.value=0,y.value=l,f.value=[],_.value=null,h.value="playing",D()}function z(l){_.value=l}function D(){if(_.value&&f.value.push({question:C.value,answer:_.value}),M.value>=kt+(y.value-1)*2)h.value="end";else{M.value++;const l=JSON.parse(JSON.stringify(w.value)).sort(()=>.5-Math.random()).slice(0,4);C.value=l[0],q.value=l.sort(()=>.5-Math.random()),_.value=null,k(C.value,y.value)}}function E(){k(C.value,y.value)}function k(l,s){const v=speechSynthesis.getVoices().filter(c=>c.lang==="ja_JP"||c.lang==="ja-JP"||c.lang==="ja");if(!v.length){alert("Japanese voice data not found.");const c=B("noJpVoiceFound");c.value=!0,window.scrollTo(0,0)}const i=new SpeechSynthesisUtterance(l),b=s===1?.7:s===2?Math.random()*.25+.8:s===3?Math.random()*.5+1:.1,e=Math.random()*1+.5;i.lang="ja-JP",i.rate=b,i.pitch=e,i.voice=v[Math.floor(Math.random()*v.length)],speechSynthesis.cancel(),speechSynthesis.speak(i)}return W(()=>{R()}),(l,s)=>{const v=I,i=Q,b=X;return n(),V(b,{name:"default"},{default:P(()=>[t("div",et,[A(v),A(i),o(h)!=="playing"?(n(),a("div",nt,[o(h)==="end"?(n(),a(u,{key:0},[t("h2",null,d(o(N))+" レベル"+d(o(y))+"の 練習結果 ",1),t("table",null,[st,t("tbody",null,[(n(!0),a(u,null,j(o(f),(e,c)=>(n(),a("tr",{key:`question_history_${c}`},[t("td",null,[t("a",{href:"#",onClick:F(T=>k(e.question,1),["prevent"])},d(e.question),9,ot)]),t("td",null,[t("a",{href:"#",onClick:F(T=>k(e.answer,1),["prevent"])},d(e.answer),9,at)]),t("td",null,d(e.question===e.answer?"⭕️":"❌"),1)]))),128))])]),t("div",lt,[p(" 正解率 "+d(o(g))+" % ",1),o(g)>98?(n(),a(u,{key:0},[p(" 素晴らしい！👍 ")],64)):o(g)>80?(n(),a(u,{key:1},[p(" 上手になったね！ ")],64)):o(g)>70?(n(),a(u,{key:2},[p(" よくできたね！ ")],64)):o(g)>60?(n(),a(u,{key:3},[p(" だんだんできたね！ ")],64)):(n(),a(u,{key:4},[p(" もっと頑張ってね。 ")],64))])],64)):(n(),a(u,{key:1},[t("h2",null," 下記はこのテーマ「"+d(o(N))+"」に入れた単語 ",1),t("div",ut,[(n(!0),a(u,null,j(o(w),(e,c)=>(n(),a("a",{key:`custom_test_question_${c}`,href:"#",onClick:F(T=>k(e,1),["prevent"])},d(e),9,it))),128))])],64)),ct,t("div",rt,[t("h2",null,[o(h)===null?(n(),a(u,{key:0},[p(" 始めましょう！ ")],64)):(n(),a(u,{key:1},[p(" もう一度しましょう！ ")],64))]),t("button",{type:"button",onClick:s[0]||(s[0]=e=>J(1))}," レベル一 "),t("button",{type:"button",onClick:s[1]||(s[1]=e=>J(2))}," レベル二 "),t("button",{type:"button",onClick:s[2]||(s[2]=e=>J(3))}," レベル三 ")])])):o(h)==="playing"?(n(),a("div",dt,[t("div",pt,[_t,(n(!0),a(u,null,j(o(q),(e,c)=>(n(),a("button",{key:`ans_${c}`,type:"button",class:Y(["tertiary ans",{outline:o(_)!==e}]),onClick:T=>z(e)},d(e),11,ht))),128))]),vt,t("div",mt,[t("button",{type:"button",class:"secondary outline",onClick:s[3]||(s[3]=e=>E())}," もう一度聞く "),t("button",{type:"button",disabled:!o(_),onClick:s[4]||(s[4]=e=>D())}," 次へ ",8,yt)]),t("div",ft,[(n(),V(O("script"),{async:"",src:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8209950884395919",crossorigin:"anonymous"})),gt,(n(),V(O("script"),null,{default:P(()=>[p(" (adsbygoogle = window.adsbygoogle || []).push({}); ")]),_:1}))])])):Z("",!0)])]),_:1})}}};export{$t as default};
