import{r as v,i as V,u as B,j as E,c,a as e,k as i,q as p,F as j,l as I,s as h,t as f,x as w,y,z as k,o as r,v as M,d as z}from"./entry.5e054b33.js";const F={class:"main _add"},J=e("h2",null," 新しい練習を作ろう！ ",-1),O=e("div",null," 作成したデータはこのブラウザに保存されるので、自分しか見ることができません。 ",-1),R=e("hr",null,null,-1),U={class:"grid"},A={class:"list"},H=e("h3",null," 保存したテーマ ",-1),L={key:0,class:"alert"},Q=["onClick"],Y=["onClick"],G=e("hr",null,null,-1),K={key:0},P={key:1},W={class:"item"},X=e("label",null,"テーマ",-1),Z={class:"item"},ee=e("label",null,"単語（改行で単語を区切ってください）",-1),te={class:"actions"},ne=e("button",null," 保存 ",-1),b="saved_tests",se="編集 - 聞き取りゲーム",_="自分のテーマを編集",le="https://kikitori.boggy.tw",S="https://kikitori.boggy.tw/images/share.jpg",ie={__name:"add",setup(oe){const l=v([]),o=v(null),a=v(null),d=v(null),m=v(null);function N(){const n=localStorage.getItem(b);l.value=n?JSON.parse(n):[]}function g(){localStorage.setItem(b,JSON.stringify(l.value)),window.dispatchEvent(new Event("saved_test_updated"))}function C(n){o.value=n,a.value=l.value[n].title,d.value=l.value[n].questions.join("\r");const t=window.scrollY+m.value.getBoundingClientRect().y-100;window.scrollTo(0,t)}function q(){o.value=null,a.value=null,d.value=null}function T(){const n=a.value.replace(/^\s+|\s+$/g,"");if(console.log(o.value),o.value===null&&l.value.find(s=>s.title===n)){alert("保存に失敗しました。すでに同じテーマがあります。");return}const t=[...new Set(d.value.split(/\r|\n/g).filter(s=>!!s))];if(t.length<4){alert("保存に失敗しました。少なくとも4つ異なる単語が必要です。");return}t.forEach((s,u)=>{t[u]=t[u].replace(/^\s+|\s+$/g,"")}),!isNaN(o.value)&&o.value!==null?l.value[o.value]={title:n,questions:t}:(l.value.push({title:n,questions:t}),o.value=l.value.length-1),g(),alert("保存しました")}function $(n){confirm("Are you sure")&&(l.value.splice(n,1),g())}const x=V("pTitle");return x.value="新しい練習を作ろう！",B({title:se,meta:[{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"},{name:"description",content:_},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:a},{name:"twitter:description",desc:_},{name:"twitter:image",content:S},{name:"og:type",content:"website"},{name:"og:title",content:a},{name:"og:description",content:_},{name:"og:image",content:S},{name:"og:url",content:le},{name:"og:site_name",content:"iDrip"}]}),E(()=>{N()}),(n,t)=>(r(),c("div",F,[J,O,R,e("div",U,[e("div",A,[H,i(l).length?p("",!0):(r(),c("div",L," データがありません ")),(r(!0),c(j,null,I(i(l),(s,u)=>(r(),c("div",{key:`test_${u}`,class:M(["item",{active:u===i(o)}]),onClick:D=>C(u)},[z(f(s.title)+" ",1),e("button",{type:"button",class:"small outline secondary",onClick:h(D=>$(u),["stop"])}," 削除 ",8,Y)],10,Q))),128)),G]),e("div",{ref_key:"content",ref:m,class:"content"},[e("form",{onSubmit:t[3]||(t[3]=h(s=>T(),["prevent"]))},[i(o)!==null?(r(),c("h3",K," テーマ「"+f(i(a))+"」を編集 ",1)):(r(),c("h3",P," 新しいテーマを編集 ")),e("div",W,[X,w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>k(a)?a.value=s:null),required:""},null,512),[[y,i(a)]])]),e("div",Z,[ee,w(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>k(d)?d.value=s:null),required:""},null,512),[[y,i(d)]])]),e("div",te,[i(o)!==null?(r(),c("button",{key:0,type:"button",class:"outline secondary",onClick:t[2]||(t[2]=s=>q())}," 新しいのを作る ")):p("",!0),ne])],32)],512)])]))}};export{ie as default};
